<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Survey Results</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet" />
  <style>
    body {
      background: url('images/bg3.png') no-repeat center center fixed;
      background-size: cover;
      font-family: Arial, sans-serif;
    }
    .overlay {
      background-color: rgba(135, 206, 250, 0.6); /* light blue overlay */
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    .logo {
      font-family: 'Great Vibes', cursive;
      font-size: 2.5rem;
      color: white;
      user-select: none;
      padding-left: 1rem;
      letter-spacing: 0.1em;
    }
    nav a {
      color: white;
      margin-left: 1.5rem;
      font-weight: 600;
      text-decoration: none;
      transition: color 0.3s;
    }
    nav a:hover {
      color: #dbeafe; /* lighter blue on hover */
    }
    .card {
      background-color: rgba(255 255 255 / 0.85);
      border-radius: 0.75rem;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .chart-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      font-size: 0.875rem;
      margin-bottom: 1rem;
      color: #1e3a8a; /* blue-900 */
    }
    .chart-legend span {
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }
    .chart-legend span .dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      display: inline-block;
    }
    .dot-conception1 { background-color: #0c4a6e; }
    .dot-conception2 { background-color: #14532d; }
    .dot-sss { background-color: #2563eb; }
    .dot-parang { background-color: #4b5563; }
    .dot-fortune { background-color: #60a5fa; }
    .dot-female { background-color: #0c4a6e; }
    .dot-male { background-color: #1e40af; }
    .dot-responses { background-color: #2563eb; }

    /* Demographics grid */
    .demographics-grid {
      display: flex;
      justify-content: space-between;
      gap: 2rem;
      flex-wrap: wrap;
    }
    .demographics-section {
      flex: 1 1 30%;
    }
    .demographics-section ul {
      list-style-type: disc;
      padding-left: 1.25rem;
      color: #1e293b; /* slate-800 */
    }
    .demographics-section strong {
      display: block;
      margin-bottom: 0.5rem;
      color: #0f172a; /* slate-900 */
    }

    /* Map and pie chart container */
    .map-pie-container {
      display: flex;
      gap: 2rem;
      flex-wrap: wrap;
      align-items: flex-start;
    }
    .map-container, .pie-container {
      background-color: white;
      border-radius: 0.75rem;
      padding: 1rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      flex: none;
      width: 450px;
      height: 450px; /* Adjusted height to match iframe */
      overflow: hidden; /* Prevent overflow */
      box-sizing: border-box;
    }
    .map-container iframe {
      width: 100%;
      height: 100%; /* Adjusted to fill container */
      border-radius: 0.75rem;
      border: none;
      box-sizing: border-box;
    }
    .pie-chart {
      width: 450px !important;
      height: 450px !important;
    }

    .chart-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      font-size: 0.875rem;
      margin-bottom: 1rem;
      color: #1e3a8a; /* blue-900 */
    }
    .chart-legend span {
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }
    .chart-legend span .dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      display: inline-block;
    }
    .chart-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      font-size: 1.25rem;
      margin-bottom: 1.5rem;
      color: #1e3a8a; /* blue-900 */
    }
    .chart-legend span {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .chart-legend span .dot {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      display: inline-block;
    }
  </style>
</head>
<body>
  <div class="overlay">
    <header class="flex justify-between items-center py-4 px-6">
      <div class="logo select-none">
        <img src="images/LOGO 2.png" alt="Surnalysis Logo" class="h-24 object-contain" />
      </div>
      <nav class="flex items-center">
        <a href="Homepage.html">Home</a>
        <a href="about.html">About</a>
        <a href="create survey.html">Create Survey</a>
        <a href="view survey.html">View Survey</a>
        <a href="view result.html">View Result</a>
      </nav>
    </header>
    <main class="flex-grow px-6 pb-6">
      <!-- Search bar -->
      <div class="flex flex-wrap items-center space-x-2 mb-6">
        <input type="text" id="searchInput" placeholder="Search" class="flex-grow max-w-xl rounded-full px-4 py-2" />
        <button id="searchButton" class="bg-white text-black rounded-full px-4 py-2 border border-black">Search</button>
      </div>

      <!-- Survey Answer Average provider card -->
      <section class="card">
        <h2 class="text-xl font-bold text-slate-900 mb-1">Survey Answer Average provider</h2>
        <p class="font-semibold text-slate-700 mb-4">A tool that calculates the average of survey responses for quick and easy data analysis.</p>
        <div class="chart-legend mb-4">
          <span><span class="dot dot-conception1"></span> Conception 1</span>
          <span><span class="dot dot-conception2"></span> Conception 2</span>
          <span><span class="dot dot-sss"></span> SSS</span>
          <span><span class="dot dot-parang"></span> Parang</span>
          <span><span class="dot dot-fortune"></span> Fortune</span>
          <span><span class="dot dot-female"></span> Female</span>
          <span><span class="dot dot-male"></span> Male</span>
          <span><span class="dot dot-responses"></span> Responses</span>
        </div>
        <!-- Placeholder for bar chart -->
        <canvas id="barChart" width="800" height="300"></canvas>
      </section>

      <!-- Over Demographics card -->
      <section class="card">
        <h2 class="text-xl font-bold text-slate-900 mb-4">Over Demographics:</h2>
        <p class="font-semibold text-slate-700 mb-6">Basic information about a population, including age and gender used to understand and analyze groups.</p>
        <div class="demographics-grid">
          <div class="demographics-section">
            <strong>Total Participants: 35</strong>
            <strong>Gender Distribution:</strong>
            <ul>
              <li>Male: 17</li>
              <li>Female: 19</li>
              <li>UnKnown:</li>
            </ul>
          </div>
          <div class="demographics-section">
            <strong>Age Distribution:</strong>
            <ul>
              <li>18–24: 22</li>
              <li>25–34: 12</li>
              <li>35–44: 1</li>
              <li>45+:</li>
            </ul>
          </div>
          <div class="demographics-section">
            <strong>Brgy Distribution:</strong>
            <ul>
              <li>Conception 1: 10</li>
              <li>Conception 2: 8</li>
              <li>SSS: 9</li>
              <li>Parang: 7</li>
              <li>Unknown:</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Map Results card -->
      <section class="card">
        <h2 class="text-xl font-bold text-slate-900 mb-4">Map Results</h2>
        <div class="chart-legend mb-4">
          <span><span class="dot dot-female"></span> Participants</span>
          <span><span class="dot dot-male"></span> High votes</span>
          <span><span class="dot dot-sss"></span> Low votes</span>
        </div>
        <div class="map-pie-container">
          <!-- Placeholder for pie chart -->
          <canvas id="pieChart" class="pie-chart" width="450" height="450"></canvas>
          <!-- Embedded map -->
          <div class="map-container">
            <iframe 
              src="https://www.openstreetmap.org/export/embed.html?bbox=121.068%2C14.599%2C121.102%2C14.615&amp;layer=mapnik" 
              style="border:1px solid black" 
              allowfullscreen 
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              title="Survey Map"
            ></iframe>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Bar chart data and config
    const barCtx = document.getElementById('barChart').getContext('2d');
    const barChart = new Chart(barCtx, {
      type: 'bar',
      data: {
        labels: ['Conception 1', 'Conception 2', 'SSS', 'Parang', 'Fortune', 'Female', 'Male', 'Responses'],
        datasets: [{
          label: 'Average',
          data: [10, 8, 9, 7, 3, 19, 17, 35],
          backgroundColor: [
            '#0c4a6e',
            '#14532d',
            '#2563eb',
            '#4b5563',
            '#60a5fa',
            '#0c4a6e',
            '#1e40af',
            '#2563eb'
          ],
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        scales: {
          y: {
            beginAtZero: true,
            max: 40,
            ticks: {
              stepSize: 5
            }
          }
        },
        plugins: {
          legend: {
            display: false
          }
        }
      }
    });

    // Pie chart data and config
    const pieCtx = document.getElementById('pieChart').getContext('2d');
    const pieChart = new Chart(pieCtx, {
      type: 'doughnut',
      data: {
        labels: ['Lower 20%', 'Higher 30%', 'People 50%'],
        datasets: [{
          data: [20, 30, 50],
          backgroundColor: [
            '#0c4a6e',
            '#2563eb',
            '#1e40af'
          ],
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        cutout: '70%',
        plugins: {
          legend: {
            position: 'right',
            labels: {
              boxWidth: 20,
              padding: 15
            }
          }
        }
      }
    });

    // Edit survey button
    document.getElementById('editSurveyButton').addEventListener('click', function() {
      window.location.href = 'view survey.html';
    });
  </script>
</body>
</html>
